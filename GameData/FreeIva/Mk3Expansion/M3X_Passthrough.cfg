// passthrough parts:
// drone core
// container module
// decoupler

@PART[M3X_cargoContainer|M3Xdecoupler|M3XDroneCore|M3X_SubsonicIntake]
{
	%MODULE[ModuleFreeIva]
	{
		passThroughNodeA = top
		passThroughNodeB = bottom
	}
}


// the following parts don't block eva
@PART[M3X_StructuralTube|M3X_LTube|M3X_Ttube|M3X_Xtube|M3X_FlatRamp|M3X_Mk2AdapterRamp|M3X_Mk2LongAdapterRamp|M3X_NoseRamp|M3Xdecoupler]
{
	%MODULE[ModuleFreeIva]
	{
		%doesNotBlockEVA = true
	}
}

// following parts have conditional passthrough based on B9PS variant
@PART[M3X_UST|M3X_size1adapter|M3X_InverterAdaptermk2]:HAS[!MODULE[ModuleFreeIva]]:AFTER[Mk3Expansion]:NEEDS[B9PartSwitch]
{
	MODULE
	{
		name = ModuleFreeIva
	}

	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[fuelSwitch]]
	{
		@SUBTYPE:HAS[~tankType],*
		{
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleFreeIva
				}
				DATA
				{
					passThroughNodeA = top
					passThroughNodeB = bottom
				}
			}
		}
	}
}